<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>pm2 用法及帮助</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.d181fa20.css" as="style"><link rel="preload" href="/blog/assets/js/app.b8ce59c5.js" as="script"><link rel="preload" href="/blog/assets/js/3.a5e154c1.js" as="script"><link rel="preload" href="/blog/assets/js/8.6377527b.js" as="script"><link rel="prefetch" href="/blog/assets/js/2.800bfc61.js"><link rel="prefetch" href="/blog/assets/js/4.065d3f92.js"><link rel="prefetch" href="/blog/assets/js/5.0254f82f.js"><link rel="prefetch" href="/blog/assets/js/6.39ea64bf.js"><link rel="prefetch" href="/blog/assets/js/7.001c8132.js"><link rel="prefetch" href="/blog/assets/js/9.0164cc35.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.d181fa20.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="container pa-0 fluid grid-list-md"><div class="layout row wrap"><div class="flex d-flex md2 lg2"><aside class="v-navigation-drawer v-navigation-drawer--close theme--light" style="height:100%;margin-top:0px;transform:translateX(-300px);width:300px;"><div class="v-card v-sheet theme--light"><div class="v-card__actions card-actions-bg"><div role="listitem" class="grow"><div class="v-list__tile theme--light"><div class="v-list__tile__avatar"><div class="v-avatar white darken-3" style="height:40px;width:40px;"><div class="v-responsive v-image elevation-6"><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></div></div> <div class="v-list__tile__content"><div class="v-list__tile__title">Roy Lau</div></div> <div class="layout align-center justify-end"><span class="v-tooltip v-tooltip--left"><div class="v-tooltip__content" style="left:12px;max-width:auto;opacity:0;top:12px;z-index:0;display:none;"> <span>897379293@qq.com</span></div><a href="mailto:897379293@qq.com" traget="_blink" class="v-btn v-btn--icon theme--light"><div class="v-btn__content"><i aria-hidden="true" class="v-icon material-icons theme--light">email</i></div></a></span></div></div></div></div> <div role="list" class="v-list v-list--dense theme--light"><hr class="v-divider theme--light"> <div role="listitem"><a class="v-list__tile v-list__tile--link theme--light"><div class="v-list__tile__action"><i aria-hidden="true" class="v-icon material-icons theme--light">dashboard</i></div> <div class="v-list__tile__content"><div class="v-list__tile__title">主页</div></div></a></div><div role="listitem"><a class="v-list__tile v-list__tile--link theme--light"><div class="v-list__tile__action"><i aria-hidden="true" class="v-icon material-icons theme--light">question_answer</i></div> <div class="v-list__tile__content"><div class="v-list__tile__title">关于</div></div></a></div></div></div><div class="v-navigation-drawer__border"></div></aside></div> <div class="flex d-flex md10"><div class="layout row wrap"><div class="flex d-flex md12 lg12"><div class="v-card v-card--flat v-sheet theme--light"><nav class="v-toolbar elevation-0 v-toolbar--extended theme--dark indigo" style="margin-top:0px;padding-right:0px;padding-left:0px;transform:translateY(0px);"><div class="v-toolbar__content" style="height:56px;"><button type="button" class="v-toolbar__side-icon v-btn v-btn--icon theme--dark"><div class="v-btn__content"><i aria-hidden="true" class="v-icon material-icons theme--dark">menu</i></div></button> <h2></h2> <div class="spacer"></div> <button type="button" class="v-btn v-btn--icon theme--dark"><div class="v-btn__content"><i aria-hidden="true" class="v-icon material-icons theme--dark">search</i></div></button></div><div class="v-toolbar__extension" style="height:56px;"></div></nav></div></div> <div class="flex d-flex md12"><div class="layout row wrap"><div class="flex d-flex md8 lg8"><div class="layout row wrap justify-center"><div class="flex d-flex md8 lg8 child-flex"><div class="card--flex-toolbar v-card v-sheet theme--light white"><div class="v-card__text"><div class="content__default"><h1 id="pm2-用法及帮助"><a href="#pm2-用法及帮助" aria-hidden="true" class="header-anchor">#</a> pm2 用法及帮助</h1> <p>用法:</p> <pre><code>$ npm install pm2 -g            # 命令行安装 pm2
$ pm2 start app.js -i 4         # 后台运行pm2，启动4核
$ pm2 start app.js -i 0         # 后台运行pm2，启动全核
</code></pre> <p>也可以把'max' 参数传递给 start
正确的进程数目依赖于Cpu的核心数目</p> <pre><code>  $ pm2 start app.js --name my-api      # 命名进程
  $ pm2 list            # 显示所有进程状态
  $ pm2 monit           # 监视所有进程
  $ pm2 logs            # 显示所有进程日志
  $ pm2 stop all        # 停止所有进程
  $ pm2 restart all     # 重启所有进程
  $ pm2 reload all      # 0秒停机重载进程 (用于 NETWORKED 进程)
  $ pm2 stop 0          # 停止指定的进程
  $ pm2 restart 0       # 重启指定的进程
  $ pm2 startup         # 产生 init 脚本 保持进程活着
  $ pm2 web             # 运行健壮的 computer API endpoint (http://localhost:9615)
  $ pm2 delete 0        # 杀死指定的进程
  $ pm2 delete all      # 杀死全部进程
</code></pre> <p>运行进程的不同方式：</p> <pre><code>  $ pm2 start app.js -i max                          # 根据有效CPU数目启动最大进程数目
  $ pm2 start app.js -i 3                            # 启动3个进程
  $ pm2 start app.js -x                              # 用fork模式启动 app.js 而不是使用 cluster
  $ pm2 start app.js -x -- -a 23                     # 用fork模式启动 app.js 并且传递参数 (-a 23)
  $ pm2 start app.js --name serverone                # 启动一个进程并把它命名为 serverone
  $ pm2 stop serverone                               # 停止 serverone 进程
  $ pm2 start app.json                               # 启动进程, 在 app.json里设置选项
  $ pm2 start app.js -i max -- -a 23                 # 在--之后给 app.js 传递参数
  $ pm2 start app.js -i max -e err.log -o out.log    # 启动 并 生成一个配置文件
</code></pre> <p>你也可以执行用其他语言编写的app ( fork 模式):</p> <pre><code>  $ pm2 start my-bash-script.sh -x --interpreter bash
  $ pm2 start my-python-script.py -x --interpreter python
</code></pre> <p>0秒停机重载:
这项功能允许你重新载入代码而不用失去请求连接。
注意：
仅能用于web应用
运行于Node 0.11.x版本
运行于 cluster 模式（默认模式）</p> <pre><code>$ pm2 reload all # 全部重启
</code></pre> <p>CoffeeScript:</p> <pre><code>$ pm2 start my_app.coffee       
</code></pre> <p>列出由pm2管理的所有进程信息，还会显示一个进程会被启动多少次，因为没处理的异常。</p> <pre><code>pm2 list
</code></pre> <p>监视每个node进程的CPU和内存的使用情况。</p> <pre><code>pm2 monit
</code></pre></div></div></div></div> <div class="flex d-flex md8 lg8"><div class="v-card v-sheet theme--dark indigo"><div class="v-card__text">评论</div></div></div></div></div> <div class="flex d-flex md2 lg2"><div class="v-card v-sheet theme--light"><div class="v-card__text">目录列表</div> <h1>$themeConfig</h1> <pre>{
  &quot;sidebar&quot;: {
    &quot;/home/&quot;: [
      &quot;one&quot;,
      &quot;two&quot;
    ],
    &quot;/bar/&quot;: [
      &quot;&quot;,
      &quot;three&quot;,
      &quot;four&quot;
    ],
    &quot;/&quot;: [
      &quot;&quot;,
      &quot;home&quot;,
      &quot;about&quot;
    ]
  }
}</pre> <h1>$frontmatter</h1> <pre>{}</pre> <h1>$site</h1> <pre>{
  &quot;title&quot;: &quot;&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;base&quot;: &quot;/blog/&quot;,
  &quot;pages&quot;: [
    {
      &quot;title&quot;: &quot;http-server用法及帮助&quot;,
      &quot;frontmatter&quot;: {},
      &quot;regularPath&quot;: &quot;/http-server.html&quot;,
      &quot;relativePath&quot;: &quot;http-server.md&quot;,
      &quot;key&quot;: &quot;v-5cdd3886&quot;,
      &quot;path&quot;: &quot;/http-server.html&quot;
    },
    {
      &quot;title&quot;: &quot;windows自动运行命令解析&quot;,
      &quot;frontmatter&quot;: {
        &quot;title&quot;: &quot;windows自动运行命令解析&quot;,
        &quot;date&quot;: &quot;2017-06-06T15:43:27.000Z&quot;,
        &quot;tags&quot;: &quot;windows&quot;,
        &quot;categories&quot;: &quot;windows&quot;,
        &quot;toc&quot;: true
      },
      &quot;regularPath&quot;: &quot;/&quot;,
      &quot;relativePath&quot;: &quot;README.md&quot;,
      &quot;key&quot;: &quot;v-79ad9d35&quot;,
      &quot;path&quot;: &quot;/&quot;,
      &quot;headers&quot;: [
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;C:\\Users\\Administrator&gt;schtasks /?&quot;,
          &quot;slug&quot;: &quot;c-users-administrator-schtasks&quot;
        },
        {
          &quot;level&quot;: 2,
          &quot;title&quot;: &quot;Schtasks&quot;,
          &quot;slug&quot;: &quot;schtasks&quot;
        },
        {
          &quot;level&quot;: 2,
          &quot;title&quot;: &quot;schtasks create&quot;,
          &quot;slug&quot;: &quot;schtasks-create&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/tn TaskName&quot;,
          &quot;slug&quot;: &quot;tn-taskname&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/tr TaskRun&quot;,
          &quot;slug&quot;: &quot;tr-taskrun&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/sc schedule&quot;,
          &quot;slug&quot;: &quot;sc-schedule&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/mo modifier&quot;,
          &quot;slug&quot;: &quot;mo-modifier&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/d dirlist&quot;,
          &quot;slug&quot;: &quot;d-dirlist&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/m month[,month...]&quot;,
          &quot;slug&quot;: &quot;m-month-month&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/i InitialPageFileSize&quot;,
          &quot;slug&quot;: &quot;i-initialpagefilesize&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/st StartTime&quot;,
          &quot;slug&quot;: &quot;st-starttime&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/sd StartDate&quot;,
          &quot;slug&quot;: &quot;sd-startdate&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/ed EndDate&quot;,
          &quot;slug&quot;: &quot;ed-enddate&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/s Computer&quot;,
          &quot;slug&quot;: &quot;s-computer&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/u [domain\\]user&quot;,
          &quot;slug&quot;: &quot;u-domain-user&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/p password&quot;,
          &quot;slug&quot;: &quot;p-password&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/ru {[Domain\\]User | \&quot;System\&quot;}&quot;,
          &quot;slug&quot;: &quot;ru-domain-user-system&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/p Password&quot;,
          &quot;slug&quot;: &quot;p-password-2&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/?&quot;,
          &quot;slug&quot;: &quot;&quot;
        },
        {
          &quot;level&quot;: 2,
          &quot;title&quot;: &quot;注释&quot;,
          &quot;slug&quot;: &quot;注释&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;schtasks create minute&quot;,
          &quot;slug&quot;: &quot;schtasks-create-minute&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;schtasks create hourly&quot;,
          &quot;slug&quot;: &quot;schtasks-create-hourly&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;schtasks create daily&quot;,
          &quot;slug&quot;: &quot;schtasks-create-daily&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;schtasks create weekly&quot;,
          &quot;slug&quot;: &quot;schtasks-create-weekly&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;schtasks create monthly&quot;,
          &quot;slug&quot;: &quot;schtasks-create-monthly&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;schtasks create once&quot;,
          &quot;slug&quot;: &quot;schtasks-create-once&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;schtasks create onstart&quot;,
          &quot;slug&quot;: &quot;schtasks-create-onstart&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;schtasks create onlogon&quot;,
          &quot;slug&quot;: &quot;schtasks-create-onlogon&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;schtasks create onidle&quot;,
          &quot;slug&quot;: &quot;schtasks-create-onidle&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;更多范例&quot;,
          &quot;slug&quot;: &quot;更多范例&quot;
        },
        {
          &quot;level&quot;: 2,
          &quot;title&quot;: &quot;创建运行多个程序的任务&quot;,
          &quot;slug&quot;: &quot;创建运行多个程序的任务&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/tn TaskName&quot;,
          &quot;slug&quot;: &quot;tn-taskname-2&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/s Computer&quot;,
          &quot;slug&quot;: &quot;s-computer-2&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/u [domain\\]user&quot;,
          &quot;slug&quot;: &quot;u-domain-user-2&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/p password&quot;,
          &quot;slug&quot;: &quot;p-password-3&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/tr TaskRun&quot;,
          &quot;slug&quot;: &quot;tr-taskrun-2&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/ru [Domain\\]User | \&quot;System\&quot;&quot;,
          &quot;slug&quot;: &quot;ru-domain-user-system-2&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/p Password&quot;,
          &quot;slug&quot;: &quot;p-password-4&quot;
        },
        {
          &quot;level&quot;: 3,
          &quot;title&quot;: &quot;/?&quot;,
          &quot;slug&quot;: &quot;-2&quot;
        }
      ]
    },
    {
      &quot;title&quot;: &quot;pm2 用法及帮助&quot;,
      &quot;frontmatter&quot;: {},
      &quot;regularPath&quot;: &quot;/pm2.html&quot;,
      &quot;relativePath&quot;: &quot;pm2.md&quot;,
      &quot;key&quot;: &quot;v-4306cdb4&quot;,
      &quot;path&quot;: &quot;/pm2.html&quot;
    },
    {
      &quot;frontmatter&quot;: {
        &quot;layout&quot;: &quot;TimeLine&quot;
      },
      &quot;regularPath&quot;: &quot;/timeline/&quot;,
      &quot;key&quot;: &quot;v-6319eb4e&quot;,
      &quot;path&quot;: &quot;/timeline/&quot;
    },
    {
      &quot;frontmatter&quot;: {
        &quot;layout&quot;: &quot;Demo&quot;
      },
      &quot;regularPath&quot;: &quot;/demo/&quot;,
      &quot;key&quot;: &quot;v-4266f277&quot;,
      &quot;path&quot;: &quot;/demo/&quot;
    }
  ],
  &quot;themeConfig&quot;: {
    &quot;sidebar&quot;: {
      &quot;/home/&quot;: [
        &quot;one&quot;,
        &quot;two&quot;
      ],
      &quot;/bar/&quot;: [
        &quot;&quot;,
        &quot;three&quot;,
        &quot;four&quot;
      ],
      &quot;/&quot;: [
        &quot;&quot;,
        &quot;home&quot;,
        &quot;about&quot;
      ]
    }
  }
}</pre> <h1>$page</h1> <pre>{
  &quot;title&quot;: &quot;pm2 用法及帮助&quot;,
  &quot;frontmatter&quot;: {},
  &quot;regularPath&quot;: &quot;/pm2.html&quot;,
  &quot;relativePath&quot;: &quot;pm2.md&quot;,
  &quot;key&quot;: &quot;v-4306cdb4&quot;,
  &quot;path&quot;: &quot;/pm2.html&quot;
}</pre></div></div></div></div> <div class="flex d-flex md12 lg12"><footer class="v-footer theme--dark" style="height:auto;"><div class="indigo lighten-1 white--text text-xs-center v-card v-card--flat v-sheet v-sheet--tile theme--dark"><div class="v-card__text"><button type="button" class="mx-3 white--text v-btn v-btn--icon theme--dark"><div class="v-btn__content"><i aria-hidden="true" class="v-icon fab fa-facebook theme--dark" style="font-size:24px;"></i></div></button><button type="button" class="mx-3 white--text v-btn v-btn--icon theme--dark"><div class="v-btn__content"><i aria-hidden="true" class="v-icon fab fa-twitter theme--dark" style="font-size:24px;"></i></div></button><button type="button" class="mx-3 white--text v-btn v-btn--icon theme--dark"><div class="v-btn__content"><i aria-hidden="true" class="v-icon fab fa-google-plus theme--dark" style="font-size:24px;"></i></div></button><button type="button" class="mx-3 white--text v-btn v-btn--icon theme--dark"><div class="v-btn__content"><i aria-hidden="true" class="v-icon fab fa-linkedin theme--dark" style="font-size:24px;"></i></div></button><button type="button" class="mx-3 white--text v-btn v-btn--icon theme--dark"><div class="v-btn__content"><i aria-hidden="true" class="v-icon fab fa-instagram theme--dark" style="font-size:24px;"></i></div></button></div> <div class="v-card__text white--text pt-0">
            Phasellus feugiat arcu sapien, et iaculis ipsum elementum sit amet. Mauris cursus commodo interdum. Praesent ut risus eget metus luctus accumsan id ultrices nunc. Sed at orci sed massa consectetur dignissim a sit amet dui. Duis commodo vitae velit et faucibus. Morbi vehicula lacinia malesuada. Nulla placerat augue vel ipsum ultrices, cursus iaculis dui sollicitudin. Vestibulum eu ipsum vel diam elementum tempor vel ut orci. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
        </div> <hr class="v-divider theme--dark"> <div class="v-card__text white--text">
            ©2019 — <strong>RoyLau</strong></div></div></footer></div></div></div></div></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.b8ce59c5.js" defer></script><script src="/blog/assets/js/3.a5e154c1.js" defer></script><script src="/blog/assets/js/8.6377527b.js" defer></script>
  </body>
</html>
