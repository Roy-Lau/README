<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PM2 用法及帮助</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.33a1c369.css" as="style"><link rel="preload" href="/blog/assets/js/app.629caf0e.js" as="script"><link rel="preload" href="/blog/assets/js/11.74850848.js" as="script"><link rel="preload" href="/blog/assets/js/10.d1bb7cca.js" as="script"><link rel="preload" href="/blog/assets/js/9.4d1832f1.js" as="script"><link rel="preload" href="/blog/assets/js/19.1d803eec.js" as="script"><link rel="preload" href="/blog/assets/js/4.7c6b3054.js" as="script"><link rel="preload" href="/blog/assets/js/5.7fac0b9d.js" as="script"><link rel="preload" href="/blog/assets/js/13.890a2db4.js" as="script"><link rel="preload" href="/blog/assets/js/8.6a279bdc.js" as="script"><link rel="prefetch" href="/blog/assets/js/1.46c0bafe.js"><link rel="prefetch" href="/blog/assets/js/12.c01419ba.js"><link rel="prefetch" href="/blog/assets/js/14.86072680.js"><link rel="prefetch" href="/blog/assets/js/15.6b1e063a.js"><link rel="prefetch" href="/blog/assets/js/16.cafa1eda.js"><link rel="prefetch" href="/blog/assets/js/17.29c3390f.js"><link rel="prefetch" href="/blog/assets/js/18.478e7baa.js"><link rel="prefetch" href="/blog/assets/js/20.46e3bf80.js"><link rel="prefetch" href="/blog/assets/js/21.357aef0c.js"><link rel="prefetch" href="/blog/assets/js/3.37277572.js"><link rel="prefetch" href="/blog/assets/js/6.8f2f7948.js"><link rel="prefetch" href="/blog/assets/js/7.9ee0fefe.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.33a1c369.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="container pa-0 fluid grid-list-md" data-v-75d69e34 data-v-75d69e34><div class="layout row wrap" data-v-75d69e34 data-v-75d69e34><div class="flex pa-0 md2 lg2" data-v-75d69e34 data-v-75d69e34><aside Layout="Layout" class="elevation-15 aside-cls" data-v-61b3d780 data-v-61b3d780 data-v-75d69e34><div class="v-card__actions card-actions-bg" data-v-61b3d780><div role="listitem" class="grow" data-v-61b3d780><div class="v-list__tile theme--light"><div class="v-list__tile__avatar" data-v-61b3d780><div class="v-avatar white darken-3" style="height:50px;width:50px;" data-v-61b3d780><div role="img" aria-label="avatar" class="v-responsive v-image elevation-8" data-v-61b3d780><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></div></div> <div class="v-list__tile__content" data-v-61b3d780><button type="button" class="v-btn v-btn--flat v-btn--small theme--light white--text" data-v-61b3d780><div class="v-btn__content">Roy Lau</div></button></div> <div class="layout align-center justify-end" data-v-61b3d780><span class="v-tooltip v-tooltip--left" data-v-61b3d780><div data-v-61b3d780="" class="v-tooltip__content" style="left:12px;max-width:auto;opacity:0;top:12px;z-index:0;display:none;"> <span color="white" data-v-61b3d780>897379293@qq.com</span></div><a href="mailto:897379293@qq.com" traget="_blink" class="v-btn v-btn--icon theme--light" data-v-61b3d780><div class="v-btn__content"><i aria-hidden="true" class="v-icon material-icons theme--light" data-v-61b3d780>email</i></div></a></span></div></div></div></div> <div role="list" class="v-list theme--light" data-v-61b3d780><div role="listitem" data-v-61b3d780><a href="/blog/home" class="v-list__tile v-list__tile--link theme--light"><div class="v-list__tile__action" data-v-61b3d780><i aria-hidden="true" class="v-icon material-icons theme--light indigo--text" data-v-61b3d780>home</i></div> <div class="v-list__tile__content" data-v-61b3d780><div class="v-list__tile__title indigo--text" data-v-61b3d780>主页</div></div></a></div><div role="listitem" data-v-61b3d780><a href="/blog/files" class="v-list__tile v-list__tile--link theme--light"><div class="v-list__tile__action" data-v-61b3d780><i aria-hidden="true" class="v-icon material-icons theme--light orange--text" data-v-61b3d780>folder</i></div> <div class="v-list__tile__content" data-v-61b3d780><div class="v-list__tile__title orange--text" data-v-61b3d780>归档</div></div></a></div><div role="listitem" data-v-61b3d780><a href="/blog/tags" class="v-list__tile v-list__tile--link theme--light"><div class="v-list__tile__action" data-v-61b3d780><i aria-hidden="true" class="v-icon material-icons theme--light brown--text" data-v-61b3d780>loyalty</i></div> <div class="v-list__tile__content" data-v-61b3d780><div class="v-list__tile__title brown--text" data-v-61b3d780>标签</div></div></a></div></div></aside></div> <div class="flex pa-0 side-x xs12 sm12 md12 lg10 xl10 offset-lg2 offset-xl2" data-v-75d69e34 data-v-75d69e34><header Layout="Layout" class="deep-purple header-warp h-layout" data-v-64863caa data-v-75d69e34><div class="layout deep-purple ma-0 min-header row justify-space-between" data-v-64863caa data-v-64863caa><div class="flex xs1 sm1 md1 lg1 xl1" data-v-64863caa data-v-64863caa><button type="button" title="切换视图" class="v-btn v-btn--flat v-btn--icon theme--light white--text" data-v-64863caa><div class="v-btn__content"><i aria-hidden="true" class="v-icon material-icons theme--light" data-v-64863caa>view_headline</i></div></button></div> <h3 class="white--text text-xs-center top-title" data-v-64863caa>PM2 用法及帮助</h3> <div class="flex xs3 sm3 md3 lg3 xl3" data-v-64863caa data-v-64863caa><button type="button" title="搜索" class="v-btn v-btn--flat v-btn--icon theme--light white--text" data-v-64863caa><div class="v-btn__content"><i aria-hidden="true" class="v-icon material-icons theme--light" data-v-64863caa>search</i></div></button> <button type="button" title="订阅" class="v-btn v-btn--flat v-btn--icon theme--light white--text" data-v-64863caa><div class="v-btn__content"><i aria-hidden="true" class="v-icon material-icons theme--light" data-v-64863caa>rss_feed</i></div></button></div></div> <h1 class="white--text text-xs-center header-title show" data-v-64863caa>PM2 用法及帮助</h1> <div class="v-dialog__container" style="display:block;" data-v-64863caa><div tabIndex="-1" data-v-64863caa="" class="v-dialog__content" style="z-index:0;"><div class="v-dialog" style="max-width:500px;display:none;"><div class="v-card v-sheet theme--light" data-v-64863caa><div class="v-card__title" data-v-64863caa>订阅</div> <div class="v-card__text" data-v-64863caa><a href="https:roy-lau.github.io/blog/rss" data-v-64863caa>https:roy-lau.github.io/blog/rss</a> <button type="button" class="v-btn theme--light" data-v-64863caa><div class="v-btn__content">点击复制链接</div></button></div> <div class="v-card__text" data-v-64863caa><div class="v-input v-text-field theme--light" data-v-64863caa><div class="v-input__control"><div class="v-input__slot"><div class="v-text-field__slot"><label aria-hidden="true" class="v-label theme--light" style="left:0px;right:auto;position:absolute;">请输入您要订阅本博客的邮箱地址</label><input aria-label="请输入您要订阅本博客的邮箱地址" required="required" type="text"></div></div><div class="v-text-field__details"><div class="v-messages theme--light"><div class="v-messages__wrapper"></div></div></div></div></div></div> <div class="v-card__actions" data-v-64863caa><button type="button" class="v-btn v-btn--flat theme--light" data-v-64863caa><div class="v-btn__content">取消</div></button> <button type="button" class="v-btn v-btn--flat theme--light primary--text" data-v-64863caa><div class="v-btn__content">订阅</div></button></div></div></div></div></div></header></div></div> <div class="layout row wrap" data-v-75d69e34 data-v-75d69e34><div class="flex side-x xs12 sm12 md12 lg10 xl10 offset-lg2 offset-xl2" data-v-75d69e34 data-v-75d69e34><div Layout="Layout" class="layout row wrap justify-center" data-v-47085eee data-v-47085eee data-v-75d69e34><div class="flex d-flex md8 lg8" data-v-47085eee data-v-47085eee><div class="layout row wrap justify-center" data-v-47085eee data-v-47085eee><div class="flex md10 lg10" data-v-47085eee data-v-47085eee><div class="elevation-15 layout-card v-card v-sheet theme--light sliver has" data-v-47085eee><div class="v-card__text" data-v-47085eee><div class="content__default" data-v-47085eee><h1 id="pm2-用法及帮助"><a href="#pm2-用法及帮助" aria-hidden="true" class="header-anchor">#</a> pm2 用法及帮助</h1> <p>用法:</p> <pre><code>$ npm install pm2 -g            # 命令行安装 pm2
$ pm2 start app.js -i 4         # 后台运行pm2，启动4核
$ pm2 start app.js -i 0         # 后台运行pm2，启动全核
</code></pre> <p>也可以把'max' 参数传递给 start
正确的进程数目依赖于Cpu的核心数目</p> <pre><code>  $ pm2 start app.js --name my-api      # 命名进程
  $ pm2 list            # 显示所有进程状态
  $ pm2 monit           # 监视所有进程
  $ pm2 logs            # 显示所有进程日志
  $ pm2 stop all        # 停止所有进程
  $ pm2 restart all     # 重启所有进程
  $ pm2 reload all      # 0秒停机重载进程 (用于 NETWORKED 进程)
  $ pm2 stop 0          # 停止指定的进程
  $ pm2 restart 0       # 重启指定的进程
  $ pm2 startup         # 产生 init 脚本 保持进程活着
  $ pm2 web             # 运行健壮的 computer API endpoint (http://localhost:9615)
  $ pm2 delete 0        # 杀死指定的进程
  $ pm2 delete all      # 杀死全部进程
</code></pre> <p>运行进程的不同方式：</p> <pre><code>  $ pm2 start app.js -i max                          # 根据有效CPU数目启动最大进程数目
  $ pm2 start app.js -i 3                            # 启动3个进程
  $ pm2 start app.js -x                              # 用fork模式启动 app.js 而不是使用 cluster
  $ pm2 start app.js -x -- -a 23                     # 用fork模式启动 app.js 并且传递参数 (-a 23)
  $ pm2 start app.js --name serverone                # 启动一个进程并把它命名为 serverone
  $ pm2 stop serverone                               # 停止 serverone 进程
  $ pm2 start app.json                               # 启动进程, 在 app.json里设置选项
  $ pm2 start app.js -i max -- -a 23                 # 在--之后给 app.js 传递参数
  $ pm2 start app.js -i max -e err.log -o out.log    # 启动 并 生成一个配置文件
</code></pre> <p>你也可以执行用其他语言编写的app ( fork 模式):</p> <pre><code>  $ pm2 start my-bash-script.sh -x --interpreter bash
  $ pm2 start my-python-script.py -x --interpreter python
</code></pre> <p>0秒停机重载:
这项功能允许你重新载入代码而不用失去请求连接。
注意：
仅能用于web应用
运行于Node 0.11.x版本
运行于 cluster 模式（默认模式）</p> <pre><code>$ pm2 reload all # 全部重启
</code></pre> <p>CoffeeScript:</p> <pre><code>$ pm2 start my_app.coffee
</code></pre> <p>列出由pm2管理的所有进程信息，还会显示一个进程会被启动多少次，因为没处理的异常。</p> <pre><code>pm2 list
</code></pre> <p>监视每个node进程的CPU和内存的使用情况。</p> <pre><code>pm2 monit
</code></pre></div></div> <hr class="v-divider theme--light" data-v-47085eee> <div class="flex sm12 xs12 md12 lg12" data-v-47085eee><div class="post-copyright" data-v-47085eee><div class="content" data-v-47085eee><p data-v-47085eee>更新时间：
                                       <a href="/blog/files/?dateTime=v-4306cdb4" rel="external" class="text--link indigo--text" data-v-47085eee><time datetime="2019 七月 11日, 下午 4:38:40" itemprop="dateUpdated" data-v-47085eee>2019 七月 11日, 下午 4:38:40</time></a></p> <p data-v-47085eee>原文链接：
                                       <a target="_blank" rel="external" class="text--link indigo--text" data-v-47085eee></a></p></div></div> <div class="text-xs-right" data-v-47085eee><span tabindex="0" class="v-chip theme--light blue lighten-4" data-v-47085eee><span class="v-chip__content"><div class="v-avatar" style="height:48px;width:48px;" data-v-47085eee><div role="img" aria-label="my" class="v-responsive v-image" data-v-47085eee><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></div>
                                   Roy Lau
                               </span></span></div></div></div></div> <div class="flex paginations md10 lg10" data-v-ec538352 data-v-ec538352 data-v-47085eee><div class="layout row wrap align-center justify-space-between fill-height" data-v-ec538352 data-v-ec538352><div class="text-xs-left" data-v-ec538352><span class="v-tooltip v-tooltip--top" data-v-ec538352><div data-v-ec538352="" class="v-tooltip__content" style="left:0px;max-width:auto;opacity:0;top:12px;z-index:0;display:none;"> <span data-v-ec538352>上一页: http-server用法及帮助</span></div><a href="/blog/http-server.html" class="v-btn v-btn--floating v-btn--router theme--dark purple" data-v-ec538352><div class="v-btn__content"><i aria-hidden="true" class="v-icon material-icons theme--dark" data-v-ec538352>arrow_back</i></div></a></span></div> <div class="text-xs-center" data-v-ec538352><span class="v-tooltip v-tooltip--top" data-v-ec538352><div data-v-ec538352="" class="v-tooltip__content" style="left:0px;max-width:auto;opacity:0;top:12px;z-index:0;display:none;"> <span data-v-ec538352>当前页</span></div><button type="button" class="v-btn v-btn--flat theme--light" data-v-ec538352><div class="v-btn__content">- 4 -</div></button></span></div> <div class="text-xs-right" data-v-ec538352><span class="v-tooltip v-tooltip--top" data-v-ec538352><div data-v-ec538352="" class="v-tooltip__content" style="left:0px;max-width:auto;opacity:0;top:12px;z-index:0;display:none;"> <span data-v-ec538352>下一页: markdown-it-emoji 表情符号</span></div><a href="/blog/vuepress/emoji-table.html" class="v-btn v-btn--floating v-btn--router theme--dark purple" data-v-ec538352><div class="v-btn__content"><i aria-hidden="true" class="v-icon material-icons theme--dark" data-v-ec538352>arrow_forward</i></div></a></span></div></div></div> <div class="flex d-flex md10 lg10" data-v-47085eee data-v-47085eee><div class="v-card v-sheet theme--dark indigo" data-v-47085eee><div class="v-card__text" data-v-47085eee>评论 </div></div></div></div></div> <div class="toc-warp" data-v-70ddb13c data-v-47085eee><h3 class="title" data-v-70ddb13c><a href class="link" data-v-70ddb13c>目录</a></h3> <div class="body" data-v-70ddb13c><ul class="lists" data-v-70ddb13c></ul></div></div></div></div> <div class="flex pa-0 side-x xs12 sm12 md12 lg10 xl10 offset-lg2 offset-xl2" data-v-75d69e34 data-v-75d69e34><footer class="v-footer theme--dark" style="height:auto;" data-v-75d69e34><div class="flex pa-0 v-card v-card--flat v-sheet v-sheet--tile theme--dark"><div class="v-card__title deep-purple"><strong class="subheading">这是记录我文章的圣地!</strong> <div class="spacer"></div> <button type="button" class="mx-3 v-btn v-btn--icon theme--dark"><div class="v-btn__content"><i aria-hidden="true" class="v-icon fab fa-facebook theme--dark" style="font-size:24px;"></i></div></button><button type="button" class="mx-3 v-btn v-btn--icon theme--dark"><div class="v-btn__content"><i aria-hidden="true" class="v-icon fab fa-twitter theme--dark" style="font-size:24px;"></i></div></button><button type="button" class="mx-3 v-btn v-btn--icon theme--dark"><div class="v-btn__content"><i aria-hidden="true" class="v-icon fab fa-google-plus theme--dark" style="font-size:24px;"></i></div></button><button type="button" class="mx-3 v-btn v-btn--icon theme--dark"><div class="v-btn__content"><i aria-hidden="true" class="v-icon fab fa-linkedin theme--dark" style="font-size:24px;"></i></div></button><button type="button" class="mx-3 v-btn v-btn--icon theme--dark"><div class="v-btn__content"><i aria-hidden="true" class="v-icon fab fa-instagram theme--dark" style="font-size:24px;"></i></div></button></div> <hr class="my-0 white v-divider theme--dark"> <div class="v-card__actions deep-purple white--text justify-center">
            Copyright © 2019 — <strong> RoyLau </strong></div></div></footer></div> <button type="button" class="gotop-btn v-btn v-btn--floating theme--dark orange" data-v-6af7446d data-v-75d69e34><div class="v-btn__content"><i aria-hidden="true" class="v-icon material-icons theme--dark" data-v-6af7446d>arrow_upward</i></div></button></div></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.629caf0e.js" defer></script><script src="/blog/assets/js/11.74850848.js" defer></script><script src="/blog/assets/js/10.d1bb7cca.js" defer></script><script src="/blog/assets/js/9.4d1832f1.js" defer></script><script src="/blog/assets/js/19.1d803eec.js" defer></script><script src="/blog/assets/js/4.7c6b3054.js" defer></script><script src="/blog/assets/js/5.7fac0b9d.js" defer></script><script src="/blog/assets/js/13.890a2db4.js" defer></script><script src="/blog/assets/js/8.6a279bdc.js" defer></script>
  </body>
</html>
