(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{439:function(o,t,s){"use strict";s.r(t);var n=s(2),a=Object(n.a)({},(function(){var o=this,t=o.$createElement,s=o._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":o.$parent.slotKey}},[s("h1",{attrs:{id:"mongodb-监控"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-监控"}},[o._v("#")]),o._v(" MongoDB 监控")]),o._v(" "),s("p",[s("RouterLink",{attrs:{to:"/data-base/mongodb/"}},[o._v("目录")])],1),o._v(" "),s("blockquote",[s("p",[o._v("已经安装部署并允许MongoDB服务后，须要了解MongoDB的运行情况，并查看MongoDB的性能。这样在大流量得情况下可以很好的应对并保证MongoDB正常运作。")])]),o._v(" "),s("blockquote",[s("p",[o._v("MongoDB中提供了mongostat 和 mongotop 两个命令来监控MongoDB的运行情况。")])]),o._v(" "),s("p",[s("strong",[o._v("mongostat 命令")])]),o._v(" "),s("p",[s("code",[o._v("mongostat")]),o._v("是"),s("code",[o._v("mongodb")]),o._v("自带的状态检测工具，在命令行下使用。它会间隔固定时间获取"),s("code",[o._v("mongodb")]),o._v("的当前运行状态，并输出。如果你发现数据库突然变慢或者有其他问题的话，你第一手的操作就考虑采用"),s("code",[o._v("mongostat")]),o._v("来查看"),s("code",[o._v("mongo")]),o._v("的状态。")]),o._v(" "),s("p",[o._v("启动你的"),s("code",[o._v("Mongod")]),o._v("服务，进入到你安装的"),s("code",[o._v("MongoDB")]),o._v("目录下的"),s("code",[o._v("bin")]),o._v("目录， 然后输入"),s("code",[o._v("mongostat")]),o._v("命令，如下所示：")]),o._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[o._v("D:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v("\\")]),o._v("set up"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v("\\")]),o._v("mongodb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v("\\")]),o._v("bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[o._v(">")]),o._v("mongostat\n")])]),o._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[o._v("1")]),s("br")])]),s("p",[o._v("以上命令输出结果如下：")]),o._v(" "),s("img",{attrs:{src:"imgs/mongostat.png",alt:"mongostat输出结果图"}}),o._v(" "),s("p",[s("strong",[o._v("mongotop 命令")])]),o._v(" "),s("p",[s("code",[o._v("mongotop")]),o._v("也是"),s("code",[o._v("mongodb")]),o._v("下的一个内置工具，"),s("code",[o._v("mongotop")]),o._v("提供了一个方法，用来跟踪一个"),s("code",[o._v("MongoDB")]),o._v("的实例，查看哪些大量的时间花费在读取和写入数据。 "),s("code",[o._v("mongotop")]),o._v("提供每个集合的水平的统计数据。默认情况下，"),s("code",[o._v("mongotop")]),o._v("返回值的每一秒。")]),o._v(" "),s("p",[o._v("启动你的"),s("code",[o._v("Mongod")]),o._v("服务，进入到你安装的"),s("code",[o._v("MongoDB")]),o._v("目录下的"),s("code",[o._v("bin")]),o._v("目录， 然后输入"),s("code",[o._v("mongotop")]),o._v("命令，如下所示：")]),o._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[o._v("D:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v("\\")]),o._v("set up"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v("\\")]),o._v("mongodb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v("\\")]),o._v("bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[o._v(">")]),o._v("mongotop\n")])]),o._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[o._v("1")]),s("br")])]),s("p",[o._v("以上命令执行输出结果如下：")]),o._v(" "),s("img",{attrs:{src:"imgs/mongotop.png",alt:"mongotop输出结果图"}}),o._v(" "),s("p",[o._v("带参数实例")]),o._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[o._v("E:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v("\\")]),o._v("mongodb-win32-x86_64-2.2.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v("\\")]),o._v("bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[o._v(">")]),o._v("mongotop "),s("span",{pre:!0,attrs:{class:"token number"}},[o._v("10")]),o._v("\n")])]),o._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[o._v("1")]),s("br")])]),s("img",{attrs:{src:"imgs/mongotop-10.gif",alt:"mongotop 10 输出结果图"}}),o._v(" "),s("p",[o._v("后面的"),s("code",[o._v("10")]),o._v("是"),s("code",[o._v("<sleeptime>")]),o._v("参数 ，可以不使用，等待的时间长度，以秒为单位，"),s("code",[o._v("mongotop")]),o._v("等待调用之间。通过的默认"),s("code",[o._v("mongotop")]),o._v("返回数据的每一秒。")]),o._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[o._v("E:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v("\\")]),o._v("mongodb-win32-x86_64-2.2.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v("\\")]),o._v("bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[o._v(">")]),o._v("mongotop --locks\n")])]),o._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[o._v("1")]),s("br")])]),s("p",[o._v("报告每个数据库的锁的使用中，使用"),s("code",[o._v("mongotop - 锁")]),o._v("，这将产生以下输出：")]),o._v(" "),s("img",{attrs:{src:"imgs/mongotop--locks.gif",alt:"mongotop 锁 输出结果图"}}),o._v(" "),s("p",[o._v("输出结果字段说明：")]),o._v(" "),s("ul",[s("li",[s("strong",[o._v("ns：")]),o._v(" 包含数据库命名空间，后者结合了数据库名称和集合。")]),o._v(" "),s("li",[s("strong",[o._v("db：")]),o._v(" 包含数据库的名称。名为 . 的数据库针对全局锁定，而非特定数据库。")]),o._v(" "),s("li",[s("strong",[o._v("total：")]),o._v(" mongod花费的时间工作在这个命名空间提供总额。")]),o._v(" "),s("li",[s("strong",[o._v("read：")]),o._v(" 提供了大量的时间，这mongod花费在执行读操作，在此命名空间。")]),o._v(" "),s("li",[s("strong",[o._v("write：")]),o._v(" 提供这个命名空间进行写操作，这mongod花了大量的时间。")])]),o._v(" "),s("p",[s("a",{staticStyle:{float:"right"},attrs:{href:"nodejs-mongodb.md"}},[o._v("nodejs 连接MongoDB")])])])}),[],!1,null,null,null);t.default=a.exports}}]);