(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{233:function(s,a,e){"use strict";e.r(a);var n=e(1),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"docker-容器连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-容器连接"}},[s._v("#")]),s._v(" docker 容器连接")]),s._v(" "),e("ul",[e("li",[e("RouterLink",{attrs:{to:"/Linux/centOS/docker/command.html"}},[s._v("相关命令")])],1),s._v(" "),e("li",[e("RouterLink",{attrs:{to:"/Linux/centOS/docker/install.html"}},[s._v("安装使用（nginx，tomcat，mysql，oracle 11g）")])],1),s._v(" "),e("li",[e("RouterLink",{attrs:{to:"/Linux/centOS/docker/container-usage.html"}},[s._v("容器使用")])],1),s._v(" "),e("li",[e("RouterLink",{attrs:{to:"/Linux/centOS/docker/image-usage.html"}},[s._v("镜像使用")])],1),s._v(" "),e("li",[e("RouterLink",{attrs:{to:"/Linux/centOS/docker/container-connection.html"}},[s._v("容器链接")])],1)]),s._v(" "),e("h3",{attrs:{id:"docker-容器连接-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-容器连接-2"}},[s._v("#")]),s._v(" Docker 容器连接")]),s._v(" "),e("blockquote",[e("p",[s._v("实现通过端口连接到一个 docker 容器")])]),s._v(" "),e("h5",{attrs:{id:"网络端口映射"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#网络端口映射"}},[s._v("#")]),s._v(" 网络端口映射")]),s._v(" "),e("blockquote",[e("p",[s._v("创建了一个 python 应用的容器。")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker run -d -P training/webapp python app.py\nfce072cc88cee71b1cdceb57c2821d054a4a59f67da6b416fceb5593f059fc6d\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("blockquote",[e("p",[s._v("指定容器绑定的网络地址，比如绑定 127.0.0.1。")])]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("-P")]),s._v(" 参数创建一个容器，使用 "),e("code",[s._v("docker ps")]),s._v(" 来看到端口 "),e("code",[s._v("5000")]),s._v(" 绑定主机端口 "),e("code",[s._v("32768")]),s._v("。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                     NAMES\nfce072cc88ce        training/webapp     "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"python app.py"')]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" minutes ago       Up "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" minutes        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:32768-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp   grave_hopper\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("使用 "),e("code",[s._v("-p")]),s._v(" 标识来指定容器端口绑定到主机端口。")]),s._v(" "),e("p",[s._v("两种方式的区别是:")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("-P")]),s._v(" :是容器内部端口随机映射到主机的高端口。")]),s._v(" "),e("li",[e("strong",[s._v("-p")]),s._v(" : 是容器内部端口绑定到指定的主机端口。")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker run -d -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v(":5000 training/webapp python app.py\n33e4523d30aaf0258915c368e66e03b49535de0ef20317d3f639d40222ba6bc0\n\n~$ docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED              STATUS              PORTS                     NAMES\n33e4523d30aa        training/webapp     "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"python app.py"')]),s._v("     About a minute ago   Up About a minute   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:5000-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp    berserk_bartik\nfce072cc88ce        training/webapp     "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"python app.py"')]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" minutes ago        Up "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" minutes        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:32768-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp   grave_hopper\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("指定容器绑定的网络地址，比如绑定 "),e("code",[s._v("127.0.0.1")]),s._v("。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker run -d -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:5001:5000 training/webapp python app.py\n95c6ceef88ca3e71eaf303c2833fd6701d8d1b2572b5613b5a932dfdfe8a857c\n~$ docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                                NAMES\n95c6ceef88ca        training/webapp     "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"python app.py"')]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" seconds ago       Up "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" seconds        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:5001-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp   adoring_stonebraker\n33e4523d30aa        training/webapp     "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"python app.py"')]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" minutes ago       Up "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" minutes        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:5000-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp               berserk_bartik\nfce072cc88ce        training/webapp     "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"python app.py"')]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" minutes ago      Up "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" minutes       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:32768-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp              grave_hopper\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("blockquote",[e("p",[s._v("这样就可以通过访问 127.0.0.1:5001 来访问容器的 5000 端口。")])]),s._v(" "),e("p",[s._v("上面的例子中，默认都是绑定 "),e("code",[s._v("tcp")]),s._v(" 端口，如果要绑定 "),e("code",[s._v("UDP")]),s._v(" 端口，可以在端口后面加上 "),e("code",[s._v("/udp")]),s._v("。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker run -d -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:5000:5000/udp training/webapp python app.py\n6779686f06f6204579c1d655dd8b2b31e8e809b245a97b2d3a8e35abe9dcd22a\n~$ docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                                NAMES\n6779686f06f6        training/webapp     "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"python app.py"')]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" seconds ago       Up "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" seconds        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:5000-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/udp   drunk_visvesvaraya\n95c6ceef88ca        training/webapp     "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"python app.py"')]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes ago       Up "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:5001-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp   adoring_stonebraker\n33e4523d30aa        training/webapp     "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"python app.py"')]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" minutes ago       Up "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" minutes        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:5000-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp               berserk_bartik\nfce072cc88ce        training/webapp     "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"python app.py"')]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" minutes ago      Up "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" minutes       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:32768-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp              grave_hopper\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[e("code",[s._v("docker port")]),s._v(" 命令可以让我们快捷地查看端口的绑定情况。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker port adoring_stonebraker "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:5001\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h5",{attrs:{id:"docker容器连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker容器连接"}},[s._v("#")]),s._v(" Docker容器连接")]),s._v(" "),e("p",[s._v("端口映射并不是唯一把 "),e("code",[s._v("docker")]),s._v(" 连接到另一个容器的方法。\n"),e("code",[s._v("docker")]),s._v(" 有一个连接系统允许将多个容器连接在一起，共享连接信息。\n"),e("code",[s._v("docker")]),s._v(" 连接会创建一个父子关系，其中父容器可以看到子容器的信息。")]),s._v(" "),e("h5",{attrs:{id:"容器命名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器命名"}},[s._v("#")]),s._v(" 容器命名")]),s._v(" "),e("blockquote",[e("p",[s._v("创建容器的时候，"),e("code",[s._v("docker")]),s._v(" 会自动对它进行命名。另外，我们也可以使用 "),e("code",[s._v("--name")]),s._v(" 标识来命名容器，例如：")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$  docker run -d -P --name firstApp training/webapp python app.py\n43780a6eabaaf14e590b6e849235c75f3012995403f97749775e38436db9a441\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("可以使用 "),e("code",[s._v("docker ps")]),s._v(" 命令来查看容器名称。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -l\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                     NAMES\n43780a6eabaa        training/webapp     "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"python app.py"')]),s._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" minutes ago       Up "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" minutes        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:32769-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp   firstApp\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);