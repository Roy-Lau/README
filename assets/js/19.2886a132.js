(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{234:function(s,a,e){"use strict";e.r(a);var t=e(1),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"docker-镜像使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-镜像使用"}},[s._v("#")]),s._v(" docker 镜像使用")]),s._v(" "),e("ul",[e("li",[e("RouterLink",{attrs:{to:"/Linux/centOS/docker/command.html"}},[s._v("相关命令")])],1),s._v(" "),e("li",[e("RouterLink",{attrs:{to:"/Linux/centOS/docker/install.html"}},[s._v("安装使用（nginx，tomcat，mysql，oracle 11g）")])],1),s._v(" "),e("li",[e("RouterLink",{attrs:{to:"/Linux/centOS/docker/container-usage.html"}},[s._v("容器使用")])],1),s._v(" "),e("li",[e("RouterLink",{attrs:{to:"/Linux/centOS/docker/image-usage.html"}},[s._v("镜像使用")])],1),s._v(" "),e("li",[e("RouterLink",{attrs:{to:"/Linux/centOS/docker/container-connection.html"}},[s._v("容器链接")])],1)]),s._v(" "),e("h3",{attrs:{id:"docker-镜像使用-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-镜像使用-2"}},[s._v("#")]),s._v(" Docker 镜像使用")]),s._v(" "),e("p",[s._v("当运行容器时，使用的镜像如果在本地中不存在，docker 就会自动从 docker 镜像仓库中下载，默认是从 Docker Hub 公共镜像源下载。")]),s._v(" "),e("blockquote",[e("p",[s._v("主要学习点：")])]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("1、管理和使用本地 Docker 主机镜像\n2、创建镜像\n")])])]),e("p",[s._v("列出镜像列表")]),s._v(" "),e("p",[s._v("我们可以使用 "),e("code",[s._v("docker images")]),s._v(" 来列出本地主机上的镜像。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker images           \nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nubuntu              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.04")]),s._v("               90d5884b1ee0        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" days ago          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("188")]),s._v(" MB\nphp                 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),s._v("                 f40e9e0f10c8        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" days ago          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("444.8")]),s._v(" MB\nnginx               latest              6f8d099c3adc        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" days ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("182.7")]),s._v(" MB\nmysql               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),s._v("                 f2e8d6c772c0        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("324.6")]),s._v(" MB\nhttpd               latest              02ef73cf1bc0        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("194.4")]),s._v(" MB\nubuntu              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.10")]),s._v("               4e3b13c8a266        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("136.3")]),s._v(" MB\nhello-world         latest              690ed74de00f        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" months ago        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("960")]),s._v(" B\ntraining/webapp     latest              6fae60ef3446        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" months ago       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("348.8")]),s._v(" MB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("各个选项说明:")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("REPOSITORY")]),s._v(" ：表示镜像的仓库源")]),s._v(" "),e("li",[e("strong",[s._v("TAG")]),s._v(" ：镜像的标签")]),s._v(" "),e("li",[e("strong",[s._v("IMAGE ID")]),s._v(" ：镜像ID")]),s._v(" "),e("li",[e("strong",[s._v("CREATED")]),s._v(" ：镜像创建时间")]),s._v(" "),e("li",[e("strong",[s._v("SIZE")]),s._v(" ：镜像大小")])]),s._v(" "),e("p",[s._v("同一仓库源可以有多个 "),e("code",[s._v("TAG")]),s._v(" ，代表这个仓库源的不同个版本，如ubuntu仓库源里，有 "),e("code",[s._v("15.10、14.04")]),s._v(" 等多个不同的版本，我们使用 "),e("code",[s._v("REPOSITORY:TAG")]),s._v("\n来定义不同的镜像。")]),s._v(" "),e("blockquote",[e("p",[s._v("如果要使用版本为15.10的ubuntu系统镜像来运行容器时，命令如下：")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker run -t -i ubuntu:15.10 /bin/bash \nroot@d77ccb2e5cca:/"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("blockquote",[e("p",[s._v("如果要使用版本为14.04的ubuntu系统镜像来运行容器时，命令如下：")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker run -t -i ubuntu:14.04 /bin/bash \nroot@39e968165990:/"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("如果不指定一个镜像的版本标签，例如只使用 "),e("code",[s._v("ubuntu，docker")]),s._v(" 将默认使用 "),e("code",[s._v("ubuntu:latest")]),s._v(" 镜像。")]),s._v(" "),e("h5",{attrs:{id:"获取一个新的镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取一个新的镜像"}},[s._v("#")]),s._v(" 获取一个新的镜像")]),s._v(" "),e("blockquote",[e("p",[s._v("当我们在本地主机上使用一个不存在的镜像时 Docker 就会自动下载这个镜像。如果我们想预先下载这个镜像，我们可以使用 docker pull 命令来下载它。")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker pull ubuntu:13.10\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.10")]),s._v(": Pulling from library/ubuntu\n6599cadaf950: Pull complete \n23eda618d451: Pull complete \nf0be3084efe9: Pull complete \n52de432f084b: Pull complete \na3ed95caeb02: Pull complete \nDigest: sha256:15b79a6654811c8d992ebacdfbd5152fcf3d165e374e264076aa435214a947a3\nStatus: Downloaded newer image "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" ubuntu:13.10\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("下载完成后，我们可以直接使用这个镜像来运行容器。")]),s._v(" "),e("h5",{attrs:{id:"查找镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查找镜像"}},[s._v("#")]),s._v(" 查找镜像")]),s._v(" "),e("blockquote",[e("p",[s._v("Docker Hub 网址为： https://hub.docker.com/")])]),s._v(" "),e("p",[s._v("可以使用 "),e("code",[s._v("docker search")]),s._v(" 命令来搜索镜像。比如我们需要一个 "),e("code",[s._v("httpd")]),s._v(" 的镜像来作为我们的 web 服务。我们可以通过 "),e("code",[s._v("docker search")]),s._v(" 命令搜索 httpd 来寻找适合我们的镜像。")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("~$  docker search httpd\n")])])]),e("ul",[e("li",[e("strong",[s._v("NAME")]),s._v(" :镜像仓库源的名称")]),s._v(" "),e("li",[e("strong",[s._v("DESCRIPTION")]),s._v(" :镜像的描述")]),s._v(" "),e("li",[e("strong",[s._v("OFFICIAL")]),s._v(" :是否docker官方发布")])]),s._v(" "),e("h5",{attrs:{id:"拖取镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#拖取镜像"}},[s._v("#")]),s._v(" 拖取镜像")]),s._v(" "),e("blockquote",[e("p",[s._v("使用命令 docker pull 来下载镜像。")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker pull httpd\nUsing default tag: latest\nlatest: Pulling from library/httpd\n8b87079b7a06: Pulling fs layer \na3ed95caeb02: Download complete \n0d62ec9c6a76: Download complete \na329d50397b9: Download complete \nea7c1f032b5c: Waiting \nbe44112b72c7: Waiting\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("下载完成后，就可以使用这个镜像了。")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("~$ docker run httpd\n")])])]),e("h5",{attrs:{id:"创建镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建镜像"}},[s._v("#")]),s._v(" 创建镜像")]),s._v(" "),e("p",[s._v("从docker镜像仓库中下载的镜像不能满足需求时，可以通过以下两种方式对镜像进行更改。")]),s._v(" "),e("ol",[e("li",[s._v("从已经创建的容器中更新镜像，并且提交这个镜像")]),s._v(" "),e("li",[s._v("使用 Dockerfile 指令来创建一个新的镜像")])]),s._v(" "),e("h5",{attrs:{id:"更新镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新镜像"}},[s._v("#")]),s._v(" 更新镜像")]),s._v(" "),e("blockquote",[e("p",[s._v("更新镜像之前，需要使用镜像来创建一个容器。")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker run -t -i ubuntu:15.10 /bin/bash\nroot@e218edb10161:/"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("在运行的容器内使用 "),e("code",[s._v("apt-get update")]),s._v(" 命令进行更新。")]),s._v(" "),e("p",[s._v("在完成操作之后，输入 "),e("code",[s._v("exit")]),s._v(" 命令来退出这个容器。")]),s._v(" "),e("p",[s._v("此时ID为e218edb10161的容器，根据更改的容器。通过命令 "),e("code",[s._v("docker commit")]),s._v(" 来提交容器副本。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker commit -m"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"has update"')]),s._v(" -a"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"firstDocker"')]),s._v(" e218edb10161 firstDocker/ubuntu:v2\nsha256:70bf1840fd7c0d2d8ef0a42a817eb29f854c1af8f7c59fc03ac7bdee9545aff8\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("各个参数说明：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("-m")]),s._v(" :提交的描述信息")]),s._v(" "),e("li",[e("strong",[s._v("-a")]),s._v(" :指定镜像作者")]),s._v(" "),e("li",[e("strong",[s._v("e218edb10161")]),s._v(" : 容器ID")]),s._v(" "),e("li",[e("strong",[s._v("firstDocker/ubuntu:v2")]),s._v(" :指定要创建的目标镜像名")])]),s._v(" "),e("p",[s._v("我们可以使用 docker images 命令来查看我们的新镜像 "),e("code",[s._v("firstDocker/ubuntu:v2")]),s._v("：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nfirstDocker/ubuntu       v2                  70bf1840fd7c        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" seconds ago      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("158.5")]),s._v(" MB\nubuntu              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.04")]),s._v("               90d5884b1ee0        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" days ago          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("188")]),s._v(" MB\nphp                 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),s._v("                 f40e9e0f10c8        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" days ago          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("444.8")]),s._v(" MB\nnginx               latest              6f8d099c3adc        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" days ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("182.7")]),s._v(" MB\nmysql               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),s._v("                 f2e8d6c772c0        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("324.6")]),s._v(" MB\nhttpd               latest              02ef73cf1bc0        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("194.4")]),s._v(" MB\nubuntu              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.10")]),s._v("               4e3b13c8a266        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("136.3")]),s._v(" MB\nhello-world         latest              690ed74de00f        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" months ago        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("960")]),s._v(" B\ntraining/webapp     latest              6fae60ef3446        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" months ago       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("348.8")]),s._v(" MB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[s._v("使用新镜像 "),e("code",[s._v("firstDocker/ubuntu")]),s._v(" 来启动一个容器")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker run -t -i firstDocker/ubuntu:v2 /bin/bash                            \nroot@1a9fbdeb5da3:/"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h5",{attrs:{id:"构建镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建镜像"}},[s._v("#")]),s._v(" 构建镜像")]),s._v(" "),e("p",[s._v("使用命令 "),e("code",[s._v("docker build")]),s._v(" ， 从零开始来创建一个新的镜像。需要创建一个 "),e("strong",[s._v("Dockerfile")]),s._v(" 文件，其中包含一组指令来告诉 Docker 如何构建镜像。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" Dockerfile \nFROM    centos:6.7\nMAINTAINER      Fisher "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fisher@sudops.com"')]),s._v("\nRUN     /bin/echo "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root:123456'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("chpasswd\nRUN     "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" firstDocker\nRUN     /bin/echo "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'firstDocker:123456'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("chpasswd\nRUN     /bin/echo -e "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LANG='),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("en_US.UTF-8"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v('"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/etc/default/local\nEXPOSE  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\nEXPOSE  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\nCMD     /usr/sbin/sshd -D\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[e("em",[s._v("每一个指令都会在镜像上创建一个新的层，每一个指令的前缀都必须是大写的。")]),s._v(" "),e("em",[s._v("第一条FROM，指定使用哪个镜像源")]),s._v(" "),e("em",[s._v("RUN 指令告诉docker 在镜像内执行命令，安装了什么。。。")]),s._v(" "),e("em",[s._v("然后，使用 Dockerfile 文件，通过 docker build 命令来构建一个镜像。")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker build -t firstDocker/centos:6.7 "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\nSending build context to Docker daemon "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("17.92")]),s._v(" kB\nStep "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" FROM centos:6.7\n ---"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("gt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" d95b5ca17cc3\nStep "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" MAINTAINER Fisher "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fisher@sudops.com"')]),s._v("\n ---"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("gt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" Using cache\n ---"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("gt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 0c92299c6f03\nStep "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN /bin/echo "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root:123456'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("chpasswd\n ---"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("gt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" Using cache\n ---"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("gt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 0397ce2fbd0a\nStep "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" RUN "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" firstDocker\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[s._v("参数说明：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("-t")]),s._v(" ：指定要创建的目标镜像名")]),s._v(" "),e("li",[e("strong",[s._v(".")]),s._v(" ：Dockerfile 文件所在目录，可以指定Dockerfile 的绝对路径")])]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("docker images")]),s._v(" 查看创建的镜像已经在列表中存在,镜像ID为 "),e("code",[s._v("860c279d2fec")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker images \nREPOSITORY          TAG                 IMAGE ID            CREATED              SIZE\nfirstDocker/centos       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.7")]),s._v("                 860c279d2fec        About a minute ago   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("190.6")]),s._v(" MB\nfirstDocker/ubuntu       v2                  70bf1840fd7c        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" hours ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("158.5")]),s._v(" MB\nubuntu              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.04")]),s._v("               90d5884b1ee0        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" days ago           "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("188")]),s._v(" MB\nphp                 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),s._v("                 f40e9e0f10c8        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" days ago          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("444.8")]),s._v(" MB\nnginx               latest              6f8d099c3adc        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" days ago          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("182.7")]),s._v(" MB\nmysql               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),s._v("                 f2e8d6c772c0        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("324.6")]),s._v(" MB\nhttpd               latest              02ef73cf1bc0        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("194.4")]),s._v(" MB\nubuntu              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.10")]),s._v("               4e3b13c8a266        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" weeks ago          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("136.3")]),s._v(" MB\nhello-world         latest              690ed74de00f        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" months ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("960")]),s._v(" B\ncentos              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.7")]),s._v("                 d95b5ca17cc3        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" months ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("190.6")]),s._v(" MB\ntraining/webapp     latest              6fae60ef3446        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" months ago        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("348.8")]),s._v(" MB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("使用新的镜像来创建容器")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker run -t -i firstDocker/centos:6.7  /bin/bash\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@41c28d18b5fb /"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# id firstDocker")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("uid")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("firstDocker"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gid")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("firstDocker"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("groups")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("firstDocker"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h5",{attrs:{id:"设置镜像标签"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置镜像标签"}},[s._v("#")]),s._v(" 设置镜像标签")]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("docker tag")]),s._v(" 命令，为镜像添加一个新的标签。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker tag 860c279d2fec firstDocker/centos:dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("code",[s._v("docker tag")]),s._v(" 镜像ID，这里是 "),e("code",[s._v("860c279d2fec")]),s._v(" ,用户名称、镜像源名(repository name)和新的标签名(tag)。")]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("docker images")]),s._v(" 命令可以看到，ID为860c279d2fec的镜像多一个标签。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nfirstDocker/centos       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.7")]),s._v("                 860c279d2fec        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" hours ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("190.6")]),s._v(" MB\nfirstDocker/centos       dev                 860c279d2fec        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" hours ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("190.6")]),s._v(" MB\nfirstDocker/ubuntu       v2                  70bf1840fd7c        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" hours ago        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("158.5")]),s._v(" MB\nubuntu              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.04")]),s._v("               90d5884b1ee0        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" days ago          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("188")]),s._v(" MB\nphp                 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),s._v("                 f40e9e0f10c8        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" days ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("444.8")]),s._v(" MB\nnginx               latest              6f8d099c3adc        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" days ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("182.7")]),s._v(" MB\nmysql               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),s._v("                 f2e8d6c772c0        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("324.6")]),s._v(" MB\nhttpd               latest              02ef73cf1bc0        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("194.4")]),s._v(" MB\nubuntu              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.10")]),s._v("               4e3b13c8a266        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("136.3")]),s._v(" MB\nhello-world         latest              690ed74de00f        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" months ago        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("960")]),s._v(" B\ncentos              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.7")]),s._v("                 d95b5ca17cc3        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" months ago        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("190.6")]),s._v(" MB\ntraining/webapp     latest              6fae60ef3446        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" months ago       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("348.8")]),s._v(" MB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);