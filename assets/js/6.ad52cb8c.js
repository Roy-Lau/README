(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{197:function(t,s,a){t.exports=a.p+"assets/img/Figure-1-Mapping-Table-to-Collection-1.01a94d49.png"},278:function(t,s,a){"use strict";a.r(s);var e=a(1),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"mongodb-概念解析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-概念解析"}},[t._v("#")]),t._v(" MongoDB 概念解析")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/data-base/mongodb/"}},[t._v("目录")])],1),t._v(" "),e("h4",{attrs:{id:"基本概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("SQL术语/概念")]),t._v(" "),e("th",[t._v("MongoDB术语/概念")]),t._v(" "),e("th",[t._v("解释/说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("database")]),t._v(" "),e("td",[t._v("database")]),t._v(" "),e("td",[t._v("数据库")])]),t._v(" "),e("tr",[e("td",[t._v("table")]),t._v(" "),e("td",[t._v("conllection")]),t._v(" "),e("td",[t._v("数据库表/集合")])]),t._v(" "),e("tr",[e("td",[t._v("row")]),t._v(" "),e("td",[t._v("document")]),t._v(" "),e("td",[t._v("数据记录行/文档")])]),t._v(" "),e("tr",[e("td",[t._v("column")]),t._v(" "),e("td",[t._v("field")]),t._v(" "),e("td",[t._v("数据字段/域")])]),t._v(" "),e("tr",[e("td",[t._v("index")]),t._v(" "),e("td",[t._v("index")]),t._v(" "),e("td",[t._v("索引")])]),t._v(" "),e("tr",[e("td",[t._v("table joins")]),t._v(" "),e("td"),t._v(" "),e("td",[t._v("表连接，MongoDB不支持")])]),t._v(" "),e("tr",[e("td",[t._v("primary key")]),t._v(" "),e("td",[t._v("primary key")]),t._v(" "),e("td",[t._v("主键，MongoDB自动将"),e("code",[t._v("_id")]),t._v("字段设置为主键")])])])]),t._v(" "),e("p",[t._v("通过下面图例，可更直观的了解"),e("code",[t._v("mongodb")]),t._v("的一些概念")]),t._v(" "),e("img",{attrs:{src:a(197),alt:"MongoDB基本概念"}}),t._v(" "),e("h4",{attrs:{id:"数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据库"}},[t._v("#")]),t._v(" 数据库")]),t._v(" "),e("p",[t._v("一个"),e("code",[t._v("mongodb")]),t._v("中可以建立多个数据库。\n"),e("code",[t._v("MongoDB")]),t._v("的默认数据库为"),e("code",[t._v('"db"')]),t._v("，该数据库存储在"),e("code",[t._v("data")]),t._v("目录中。\n"),e("code",[t._v("MongoDB")]),t._v("的单个实例可以容纳多个独立的数据库，每一个都有自己的集合和权限，不同的数据库也放置在不同的文件中。\n"),e("code",[t._v('"show dbs"')]),t._v(" 命令可以显示所有数据的列表。")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mongo\nMongoDB shell version: "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.0")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v(".6")]),t._v("\nconnecting "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(": test\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("show")]),t._v(" dbs\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.078")]),t._v("GB\ntest   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.078")]),t._v("GB\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])]),e("p",[t._v("执行"),e("code",[t._v('"db"')]),t._v("命令可以显示当前数据库对象或集合。")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mongo\nMongoDB shell version: "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.0")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v(".6")]),t._v("\nconnecting "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(": test\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db\ntest\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("p",[t._v("运行"),e("code",[t._v('"use"')]),t._v("命令，可以连接一个指定的数据库。")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v("\nswitched "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(" db "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("blockquote",[e("p",[t._v("以上实例命令中，"),e("code",[t._v('"local"')]),t._v(" 是你要链接的数据库。")])]),t._v(" "),e("blockquote",[e("p",[t._v("数据库也通过名字来标识。数据库名可以是满足以下条件的任意UTF-8字符串。")])]),t._v(" "),e("ul",[e("li",[t._v("不能是空字符串"),e("code",[t._v('（"")')]),t._v("。")]),t._v(" "),e("li",[t._v("不得含有"),e("code",[t._v("' '（空格)、.、$、/、\\和\\0 (空字符)")]),t._v("。")]),t._v(" "),e("li",[t._v("应全部小写。")]),t._v(" "),e("li",[t._v("最多"),e("code",[t._v("64")]),t._v("字节。")])]),t._v(" "),e("blockquote",[e("p",[t._v("有一些数据库名是保留的，可以直接访问这些有特殊作用的数据库。")])]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("admin：")]),t._v(" 从权限的角度来看，这是"),e("code",[t._v('"root"')]),t._v("数据库。要是将一个用户添加到这个数据库，这个用户自动继承所有数据库的权限。一些特定的服务器端命令也只能从这个数据库运行，比如列出所有的数据库或者关闭服务器。")]),t._v(" "),e("li",[e("strong",[t._v("local:")]),t._v("  这个数据永远不会被复制，可以用来存储限于本地单台服务器的任意集合")]),t._v(" "),e("li",[e("strong",[t._v("config:")]),t._v("  当"),e("code",[t._v("Mongo")]),t._v("用于分片设置时，"),e("code",[t._v("config")]),t._v("数据库在内部使用，用于保存分片的相关信息。")])]),t._v(" "),e("h4",{attrs:{id:"文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文档"}},[t._v("#")]),t._v(" 文档")]),t._v(" "),e("blockquote",[e("p",[t._v("文档是一组键值"),e("code",[t._v("(key-value)")]),t._v("对(即"),e("code",[t._v("BSON")]),t._v(")。"),e("code",[t._v("MongoDB")]),t._v(" 的文档不需要设置相同的字段，并且相同的字段不需要相同的数据类型，这与关系型数据库有很大的区别，也是 "),e("code",[t._v("MongoDB")]),t._v(" 非常突出的特点。")])]),t._v(" "),e("p",[t._v("一个简单的文档例子如下：")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"site"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"www.runoob.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"菜鸟教程"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("下表列出了 "),e("code",[t._v("RDBMS")]),t._v(" 与 "),e("code",[t._v("MongoDB")]),t._v(" 对应的术语：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("RDBMS")]),t._v(" "),e("th",[t._v("MongoDB")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("数据库")]),t._v(" "),e("td",[t._v("数据库")])]),t._v(" "),e("tr",[e("td",[t._v("表格")]),t._v(" "),e("td",[t._v("集合")])]),t._v(" "),e("tr",[e("td",[t._v("行")]),t._v(" "),e("td",[t._v("文档")])]),t._v(" "),e("tr",[e("td",[t._v("列")]),t._v(" "),e("td",[t._v("字段")])]),t._v(" "),e("tr",[e("td",[t._v("表联合")]),t._v(" "),e("td",[t._v("嵌入文档")])]),t._v(" "),e("tr",[e("td",[t._v("主键")]),t._v(" "),e("td",[t._v("主键 "),e("code",[t._v("(MongoDB 提供了 key 为 _id )")])])])])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("数据库服务和客户端")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("Mysqld/Oracle")])]),t._v(" "),e("tr",[e("td",[t._v("mysql/sqlplus")])])])]),t._v(" "),e("p",[t._v("需要注意的是：")]),t._v(" "),e("ol",[e("li",[t._v("文档中的键/值对是有序的。")]),t._v(" "),e("li",[t._v("文档中的值不仅可以是在双引号里面的字符串，还可以是其他几种数据类型（甚至可以是整个嵌入的文档)。")]),t._v(" "),e("li",[e("code",[t._v("MongoDB")]),t._v("区分类型和大小写。")]),t._v(" "),e("li",[e("code",[t._v("MongoDB")]),t._v("的文档不能有重复的键。")]),t._v(" "),e("li",[t._v("文档的键是字符串。除了少数例外情况，键可以使用任意"),e("code",[t._v("UTF-8")]),t._v("字符。")])]),t._v(" "),e("p",[t._v("文档键命名规范：")]),t._v(" "),e("ul",[e("li",[t._v("键不能含有"),e("code",[t._v("\\0 (空字符)")]),t._v("。这个字符用来表示键的结尾。")]),t._v(" "),e("li",[e("code",[t._v(".")]),t._v("和"),e("code",[t._v("$")]),t._v("有特别的意义，只有在特定环境下才能使用。")]),t._v(" "),e("li",[t._v("以下划线"),e("code",[t._v('"_"')]),t._v("开头的键是保留的(不是严格要求的)。")])]),t._v(" "),e("h4",{attrs:{id:"集合"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#集合"}},[t._v("#")]),t._v(" 集合")]),t._v(" "),e("p",[t._v("集合就是 MongoDB 文档组，类似于 RDBMS （关系数据库管理系统：Relational Database Management System)中的表格。")]),t._v(" "),e("p",[t._v("集合存在于数据库中，集合没有固定的结构，这意味着你在对集合可以插入不同格式和类型的数据，但通常情况下我们插入集合的数据都会有一定的关联性。")]),t._v(" "),e("p",[t._v("比如，我们可以将以下不同数据结构的文档插入到集合中：")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"site"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"www.baidu.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"site"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"www.google.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Google"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"site"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"www.runoob.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"菜鸟教程"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"num"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("当第一个文档插入时，集合就会被创建。")]),t._v(" "),e("p",[e("strong",[t._v("合法的集合名")])]),t._v(" "),e("ul",[e("li",[t._v("集合名不能是空字符串"),e("code",[t._v('""')]),t._v("。")]),t._v(" "),e("li",[t._v("集合名不能含有"),e("code",[t._v("\\0字符（空字符)")]),t._v("，这个字符表示集合名的结尾。")]),t._v(" "),e("li",[t._v("集合名不能以"),e("code",[t._v('"system."')]),t._v("开头，这是为系统集合保留的前缀。")]),t._v(" "),e("li",[t._v("用户创建的集合名字不能含有保留字符。有些驱动程序的确支持在集合名里面包含，这是因为某些系统生成的集合中包含该字符。除非你要访问这种系统创建的集合，否则千万不要在名字里出现"),e("code",[t._v("$")]),t._v("。")])]),t._v(" "),e("p",[t._v("如下实例：")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[t._v("db"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("findOne"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[e("strong",[t._v("capped collections")])]),t._v(" "),e("p",[e("code",[t._v("Capped collections")]),t._v(" 就是固定大小的"),e("code",[t._v("collection")]),t._v("。")]),t._v(" "),e("p",[t._v("它有很高的性能以及队列过期的特性(过期按照插入的顺序). 有点和 "),e("code",[t._v('"RRD"')]),t._v("概念类似。")]),t._v(" "),e("p",[e("code",[t._v("Capped collections")]),t._v("是高性能自动的维护对象的插入顺序。它非常适合类似记录日志的功能 和标准的"),e("code",[t._v("collection")]),t._v("不同，你必须要显式的创建一个"),e("code",[t._v("capped collection")]),t._v("， 指定一个"),e("code",[t._v("collection")]),t._v("的大小，单位是字节。"),e("code",[t._v("collection")]),t._v("的数据存储空间值提前分配的。")]),t._v(" "),e("p",[t._v("要注意的是指定的存储大小包含了数据库的头信息。")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[t._v("db"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("createCollection"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mycoll"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" {capped:"),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size:"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000")]),t._v("}"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ul",[e("li",[t._v("在"),e("code",[t._v("capped collection")]),t._v("中，你能添加新的对象。")]),t._v(" "),e("li",[t._v("能进行更新，然而，对象不会增加存储空间。如果增加，更新就会失败 。")]),t._v(" "),e("li",[t._v("数据库不允许进行删除。使用"),e("code",[t._v("drop()")]),t._v("方法删除"),e("code",[t._v("collection")]),t._v("所有的行。")]),t._v(" "),e("li",[t._v("注意: 删除之后，你必须显式的重新创建这个"),e("code",[t._v("collection")]),t._v("。")]),t._v(" "),e("li",[t._v("在"),e("code",[t._v("32bit")]),t._v("机器中，"),e("code",[t._v("capped collection")]),t._v("最大存储为"),e("code",[t._v("1e9( 1X109)")]),t._v("个字节。")])]),t._v(" "),e("h4",{attrs:{id:"元数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#元数据"}},[t._v("#")]),t._v(" 元数据")]),t._v(" "),e("p",[t._v("数据库的信息是存储在集合中。它们使用了系统的命名空间：")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[t._v("dbname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("system"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("在"),e("code",[t._v("MongoDB")]),t._v("数据库中名字空间 "),e("code",[t._v("<dbname>.system.*")]),t._v(" 是包含多种系统信息的特殊集合"),e("code",[t._v("(Collection)")]),t._v("，如下:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("集合命名空间")]),t._v(" "),e("th",[t._v("描述")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("dbname.system.namespaces")])]),t._v(" "),e("td",[t._v("列出所有名字空间。")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("dbname.system.indexes")])]),t._v(" "),e("td",[t._v("列出所有索引。")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("dbname.system.profile")])]),t._v(" "),e("td",[t._v("包含数据库概要"),e("code",[t._v("(profile)")]),t._v("信息。")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("dbname.system.users")])]),t._v(" "),e("td",[t._v("列出所有可访问数据库的用户。")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("dbname.local.sources")])]),t._v(" "),e("td",[t._v("包含复制对端"),e("code",[t._v("（slave）")]),t._v("的服务器信息和状态。")])])])]),t._v(" "),e("p",[t._v("对于修改系统集合中的对象有如下限制。")]),t._v(" "),e("p",[t._v("在"),e("code",[t._v("system.indexes")]),t._v("插入数据，可以创建索引。但除此之外该表信息是不可变的(特殊的"),e("code",[t._v("drop index")]),t._v("命令将自动更新相关信息)。")]),t._v(" "),e("p",[e("code",[t._v("system.users")]),t._v("是可修改的。 "),e("code",[t._v("system.profile")]),t._v("是可删除的。")]),t._v(" "),e("h4",{attrs:{id:"mongodb-数据类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-数据类型"}},[t._v("#")]),t._v(" MongoDB 数据类型")]),t._v(" "),e("p",[t._v("下表为MongoDB中常用的几种数据类型")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("数据类型")]),t._v(" "),e("th",[t._v("描述")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("String")]),t._v(" "),e("td",[t._v("字符串。存储数据常用的数据类型。在 "),e("code",[t._v("MongoDB")]),t._v(" 中，"),e("code",[t._v("UTF-8")]),t._v(" 编码的字符串才是合法的。")])]),t._v(" "),e("tr",[e("td",[t._v("Integer")]),t._v(" "),e("td",[t._v("整型数值。用于存储数值。根据你所采用的服务器，可分为 32 位或 64 位。")])]),t._v(" "),e("tr",[e("td",[t._v("Boolean")]),t._v(" "),e("td",[t._v("布尔值。用于存储布尔值（真/假）。")])]),t._v(" "),e("tr",[e("td",[t._v("Double")]),t._v(" "),e("td",[t._v("双精度浮点值。用于存储浮点值。")])]),t._v(" "),e("tr",[e("td",[t._v("Min/Max keys")]),t._v(" "),e("td",[t._v("将一个值与 "),e("code",[t._v("BSON（二进制的 JSON）")]),t._v("元素的最低值和最高值相对比。")])]),t._v(" "),e("tr",[e("td",[t._v("Array")]),t._v(" "),e("td",[t._v("用于将数组或列表或多个值存储为一个键。")])]),t._v(" "),e("tr",[e("td",[t._v("Timestamp")]),t._v(" "),e("td",[t._v("时间戳。记录文档修改或添加的具体时间。")])]),t._v(" "),e("tr",[e("td",[t._v("Object")]),t._v(" "),e("td",[t._v("用于内嵌文档。")])]),t._v(" "),e("tr",[e("td",[t._v("Null")]),t._v(" "),e("td",[t._v("用于创建空值。")])]),t._v(" "),e("tr",[e("td",[t._v("Symbol")]),t._v(" "),e("td",[t._v("符号。该数据类型基本上等同于字符串类型，但不同的是，它一般用于采用特殊符号类型的语言。")])]),t._v(" "),e("tr",[e("td",[t._v("Date")]),t._v(" "),e("td",[t._v("日期时间。用 UNIX 时间格式来存储当前日期或时间。你可以指定自己的日期时间：创建"),e("code",[t._v("Date")]),t._v(" 对象，传入年月日信息。")])]),t._v(" "),e("tr",[e("td",[t._v("Object ID")]),t._v(" "),e("td",[t._v("对象 ID。用于创建文档的 ID。")])]),t._v(" "),e("tr",[e("td",[t._v("Binary Data")]),t._v(" "),e("td",[t._v("二进制数据。用于存储二进制数据。")])]),t._v(" "),e("tr",[e("td",[t._v("Code")]),t._v(" "),e("td",[t._v("代码类型。用于在文档中存储 JavaScript 代码。")])]),t._v(" "),e("tr",[e("td",[t._v("Regular expression")]),t._v(" "),e("td",[t._v("正则表达式类型。用于存储正则表达式。")])])])]),t._v(" "),e("p",[t._v("下面说明下几种重要的数据类型。")]),t._v(" "),e("h4",{attrs:{id:"objectid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#objectid"}},[t._v("#")]),t._v(" ObjectId")]),t._v(" "),e("p",[e("code",[t._v("ObjectId")]),t._v(" 类似唯一主键，可以很快的去生成和排序，包含 "),e("code",[t._v("12 bytes，")]),t._v("含义是：")]),t._v(" "),e("ul",[e("li",[t._v("前 "),e("code",[t._v("4")]),t._v(" 个字节表示创建 "),e("code",[t._v("unix")]),t._v("时间戳,格林尼治时间 "),e("code",[t._v("UTC")]),t._v(" 时间，比北京时间晚了 "),e("code",[t._v("8")]),t._v(" 个小时")]),t._v(" "),e("li",[t._v("接下来的 "),e("code",[t._v("3")]),t._v(" 个字节是机器标识码")]),t._v(" "),e("li",[t._v("紧接的两个字节由进程 "),e("code",[t._v("id")]),t._v(" 组成 "),e("code",[t._v("PID")])]),t._v(" "),e("li",[t._v("最后三个字节是随机数")])]),t._v(" "),e("img",{attrs:{src:"imgs/articlex.jpeg",alt:"ObjectId解释"}}),t._v(" "),e("p",[e("code",[t._v("MongoDB")]),t._v(" 中存储的文档必须有一个 "),e("code",[t._v("_id")]),t._v(" 键。这个键的值可以是任何类型的，默认是个 "),e("code",[t._v("ObjectId")]),t._v(" 对象")]),t._v(" "),e("p",[t._v("由于 "),e("code",[t._v("ObjectId")]),t._v(" 中保存了创建的时间戳，所以你不需要为你的文档保存时间戳字段，你可以通过 "),e("code",[t._v("getTimestamp")]),t._v(" 函数来获取文档的创建时间:")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" var newObject "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjectId"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" newObject"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getTimestamp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nISODate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2017-11-25T07:21:10Z"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("ObjectId 转为字符串")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" newObject"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("str\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("a1919e63df83ce79df8b38f\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[e("strong",[t._v("字符串")]),t._v(" "),e("em",[e("strong",[t._v("BSON 字符串都是 UTF-8 编码。")])])]),t._v(" "),e("p",[e("strong",[t._v("时间戳")])]),t._v(" "),e("p",[e("code",[t._v("BSON")]),t._v(" 有一个特殊的时间戳类型用于 "),e("code",[t._v("MongoDB")]),t._v(" 内部使用，与普通的 日期 类型不相关。 时间戳值是一个 "),e("code",[t._v("64")]),t._v(" 位的值。其中：")]),t._v(" "),e("ul",[e("li",[t._v("前32位是一个 "),e("code",[t._v("time_t")]),t._v(" 值（与"),e("code",[t._v("Unix")]),t._v("新纪元相差的秒数）")]),t._v(" "),e("li",[t._v("后32位是在某秒中操作的一个递增的序数")])]),t._v(" "),e("p",[t._v("在单个 mongod 实例中，时间戳值通常是唯一的。")]),t._v(" "),e("p",[t._v("在复制集中， "),e("code",[t._v("oplog")]),t._v(" 有一个 "),e("code",[t._v("ts")]),t._v(" 字段。这个字段中的值使用"),e("code",[t._v("BSON")]),t._v("时间戳表示了操作时间。")]),t._v(" "),e("p",[e("em",[t._v("BSON 时间戳类型主要用于 MongoDB 内部使用。在大多数情况下的应用开发中，你可以使用 BSON 日期类型。")])]),t._v(" "),e("p",[e("strong",[t._v("日期")])]),t._v(" "),e("p",[t._v("表示当前距离 Unix新纪元（1970年1月1日）的毫秒数。日期类型是有符号的, 负数表示 1970 年之前的日期.")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" var mydate1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" new "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Date")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 格林尼治时间")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" mydate1\nISODate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-03-04T14:58:51.233Z"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" typeof mydate1\nobject\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" var mydate2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ISODate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 格林尼治时间")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" mydate2\nISODate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-03-04T15:00:45.479Z"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" typeof mydate2\nobject\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("p",[t._v("这样创建的时间是日期类型，可以使用 JS 中的 Date 类型的方法。")]),t._v(" "),e("p",[t._v("返回一个时间类型的字符串：")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" var mydate1str "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mydate1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toString"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" mydate1str\nSun Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("04")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("58")]),t._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("51")]),t._v(" GMT"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0000")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UTC"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" typeof mydate1str\nstring\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("p",[t._v("或者")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Date")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nSun Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("04")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),t._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("59")]),t._v(" GMT"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0000")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UTC"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[e("a",{staticStyle:{float:"right"},attrs:{href:"connections.md"}},[t._v(" MongoDB 连接")])])])}),[],!1,null,null,null);s.default=n.exports}}]);